<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sorteador de Números — Numbers</title>
  <link rel="stylesheet" href="styles/index.css">
</head>
<body>
  <main class="shell">
    <header>
      <img class="logo-dot" src="imagem/logo.svg" width="28" height="28" alt=""/>
      <div class="brand">NUMBERS</div>
    </header>

    <!-- Cabeçalho da hero -->
    <div class="hero-head">
      <div class="tagline">ONLINE — GRATUITO</div>
      <h1>SORTEADOR DE NÚMEROS</h1>
    </div>

    <!-- Painel: Formulário -->
    <aside id="formPanel" class="panel">
      <div class="legend">QUERO SORTEAR:</div>
      <p class="helper">Defina a quantidade e o intervalo; clique em “Sortear” e veja os resultados abaixo.</p>

      <div class="row" style="margin-bottom: 30px; margin-top: 60px;">
        <div class="field"><label>NÚMEROS</label><input id="qtd" class="input" type="number" value="2" min="1" /></div>
        <div class="field"><label>DE</label><input id="min" class="input" type="number" value="1" /></div>
        <div class="field"><label>DE</label><input id="max" class="input" type="number" value="100" /></div>
      </div>

      <label class="switch"><input id="noRepeat" type="checkbox" checked /><span>Não repetir número</span></label>

      <div class="actions">
        <button id="btnSortear" class="btn">SORTEAR</button>
        <div id="hint" class="hint" style="display:none">Verifique os valores. Com “não repetir”, a quantidade não pode exceder o tamanho do intervalo.</div>
      </div>
    </aside>

    <!-- FAQ -->
    <div class="faq">
      <div class="faq__item">
        <img class="faq__icon" src="imagem/Frame.svg" alt=""/>
        <div class="faq__content">
          <h3>Como funciona o sorteador de números?</h3>
          <p>Ele usa um algoritmo de geração aleatória para criar números dentro do intervalo que você definir.</p>
        </div>
      </div>
      <div class="faq__item">
        <img class="faq__icon" src="imagem/Frame.svg" alt=""/>
        <div class="faq__content">
          <h3>Posso escolher o intervalo dos números?</h3>
          <p>Sim, você define os valores mínimo e máximo e também a quantidade.</p>
        </div>
      </div>
    </div>

    <!-- Painel: Resultado (necessário para o JS funcionar) -->
    <aside id="resultPanel" class="panel hidden" aria-live="polite">
      <div class="resultHead">
        <p class="resultTitle">RESULTADO DO SORTEIO</p>
        <p class="resultSub"><strong>1º</strong>&nbsp; RESULTADO</p>
      </div>

      <div id="numbers" class="numbers"></div>

      <div class="resultActions">
        <button id="btnAgain" class="btn">SORTEAR NOVAMENTE</button>
        <span id="linkBack" class="link">Alterar parâmetros</span>
      </div>
    </aside>
  </main>

  <script>
    // inteiro aleatório inclusivo
    function randInt(min, max){ return Math.floor(Math.random() * (max - min + 1)) + min }

    // amostra sem repetição (Fisher–Yates)
    function sampleUnique(min, max, k){
      const n = max - min + 1;
      if (k > n) throw new Error('sample too large');
      const arr = Array.from({length:n}, (_,i)=> i + min);
      for (let i = n - 1; i > 0; i--){
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr.slice(0, k).sort((a,b)=>b-a);
    }

    // refs
    const els = {
      qtd: document.getElementById('qtd'),
      min: document.getElementById('min'),
      max: document.getElementById('max'),
      noRepeat: document.getElementById('noRepeat'),
      form: document.getElementById('formPanel'),
      result: document.getElementById('resultPanel'),
      numbers: document.getElementById('numbers'),
      hint: document.getElementById('hint'),
      btnSortear: document.getElementById('btnSortear'),
      btnAgain: document.getElementById('btnAgain'),
      linkBack: document.getElementById('linkBack')
    };

    function showForm(){
      els.result.classList.add('hidden');
      els.form.classList.remove('hidden');
      els.form.classList.add('fade-in');
    }
    function showResult(){
      els.form.classList.add('hidden');
      els.result.classList.remove('hidden');
      els.result.classList.add('fade-in');
    }

    function renderNumbers(nums){
      els.numbers.innerHTML = '';
      nums.forEach(n=>{
        const span = document.createElement('span');
        span.className = 'num';
        span.textContent = String(n);
        els.numbers.appendChild(span);
      });
    }

    function validate(qtd, min, max, noRepeat){
      if (!Number.isFinite(qtd) || !Number.isFinite(min) || !Number.isFinite(max)) return false;
      if (qtd < 1) return false;
      if (min > max) return false;
      if (noRepeat && qtd > (max - min + 1)) return false;
      return true;
    }

    function sortear(params){
      const { qtd, min, max, noRepeat } = params;
      let nums = [];
      if (noRepeat){
        nums = sampleUnique(min, max, qtd);
      } else {
        for(let i=0;i<qtd;i++) nums.push(randInt(min, max));
        nums.sort((a,b)=>b-a);
      }
      renderNumbers(nums);
      showResult();
    }

    els.btnSortear.addEventListener('click', ()=>{
      const qtd = parseInt(els.qtd.value,10);
      const min = parseInt(els.min.value,10);
      const max = parseInt(els.max.value,10);
      const noRepeat = els.noRepeat.checked;

      const ok = validate(qtd, min, max, noRepeat);
      els.hint.style.display = ok ? 'none' : 'block';
      if (!ok) return;

      sortear({ qtd, min, max, noRepeat });
    });

    els.btnAgain.addEventListener('click', ()=>{
      const qtd = parseInt(els.qtd.value,10);
      const min = parseInt(els.min.value,10);
      const max = parseInt(els.max.value,10);
      const noRepeat = els.noRepeat.checked;
      sortear({ qtd, min, max, noRepeat });
    });

    els.linkBack.addEventListener('click', showForm);
  </script>
</body>
</html>